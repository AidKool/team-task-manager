{{>headerNav}}
<section class='hero m-auto is-large '>
  <div class='container is-fluid columns is-centered'>
    <div class='card is-flex is-justify-content-space-evenly p-5 has-background-info-dark '>
      <div class="columns is-desktop">
        <div class="tile is-ancestor m-1">
          <div class="tile is-12 is-parent">
            <div class="tile is-child box">
              <h1 class='box title is-3 has-text-white has-text-centered has-background-info-dark '>All Team Tasks
              </h1>
              <div class="tile is-child box has-background-warning ">
                <p class="is-size-5">All Project Tasks Assigned to Team</p>
                <div class="columns">
                  <div class="column">
                    <div class="tabs is-toggle is-fullwidth has-background-link-light mb-0">
                      <ul>
                        <li class="table-btn is-active" data-id="all-tasks">
                          <a>
                            <p class="mr-1">{{tasks.length}}</p>
                            <span>All</span>
                          </a>
                        </li>
                        <li class="table-btn" data-id="completed-tasks">
                          <a>
                            <p class="tag is-success mr-1  has-text-white ">{{completedTasks.length}}</p>
                            <span>Completed</span>
                          </a>
                        </li>
                        <li class="table-btn" data-id="in-progress-tasks">
                          <a>
                            <p class="tag is-warning mr-1 has-text-warning-white">{{inProgressTasks.length}}</p>
                            <span>InProgress</span>
                          </a>
                        </li>
                        <li class="table-btn" data-id="not-started-tasks">
                          <a>
                            <p class="tag is-danger mr-1 has-text-white">{{notStartedTasks.length}}</p>
                            <span>Not Started</span>
                          </a>
                        </li>
                      </ul>
                    </div>
                    <div class=" box">
                      <div class="column is-align-items-center">
                        <table class="table is-scrollable team-tasks-table is-hidden active" id="all-tasks">
                          <thead>
                            <tr>
                              <th><abbr title="Position">Pos</abbr></th>
                              <th>Task Title</th>
                              <th>Deadline Date</th>
                              <th>Task Status</th>
                            </tr>
                          </thead>
                          <tbody>
                            {{#each tasks as |task|}}
                            <tr>
                              <th>{{task.task_id}}</th>
                              <td>
                                <p>{{task.task_title}}</p>
                              </td>
                              <td>
                                {{formatDate task.task_deadline}}
                              </td>
                              <td>
                                <p>{{sanitiseStatus task.task_status}}</p>
                              </td>
                            </tr>
                            {{/each}}
                          </tbody>
                        </table>
                        <table class="table team-tasks-table is-scrollable is-hidden" id="completed-tasks">
                          <thead>
                            <tr>
                              <th><abbr title="Position">Task ID</abbr></th>
                              <th>Task Title</th>
                              <th>Deadline Date</th>
                              <th>Task Status</th>
                            </tr>
                          </thead>
                          <tbody>
                            {{#each completedTasks as |task|}}
                            <tr>
                              <th>{{task.task_id}}</th>
                              <td>
                                <p>{{task.task_title}}</p>
                              </td>
                              <td>
                                {{formatDate task.task_deadline}}
                              </td>
                              <td>
                                <p>{{sanitiseStatus task.task_status}}</p>
                              </td>
                            </tr>
                            {{/each}}
                          </tbody>
                        </table>
                        <table class="table team-tasks-table is-scrollable is-hidden" id="in-progress-tasks">
                          <thead>
                            <tr>
                              <th><abbr title="Position">Task ID</abbr></th>
                              <th>Task Title</th>
                              <th>Deadline Date</th>
                              <th>Task Status</th>
                            </tr>
                          </thead>
                          <tbody>
                            {{#each inProgressTasks as |task|}}
                            <tr>
                              <th>{{task.task_id}}</th>
                              <td>
                                <p>{{task.task_title}}</p>
                              </td>
                              <td>
                                {{formatDate task.task_deadline}}
                              </td>
                              <td>
                                <p>{{sanitiseStatus task.task_status}}</p>
                              </td>
                            </tr>
                            {{/each}}
                          </tbody>
                        </table>
                        <table class="table team-tasks-table is-scrollable is-hidden" id="not-started-tasks">
                          <thead>
                            <tr>
                              <th><abbr title="Position">Task ID</abbr></th>
                              <th>Task Title</th>
                              <th>Deadline Date</th>
                              <th>Task Status</th>
                            </tr>
                          </thead>
                          <tbody>
                            {{#each notStartedTasks as |task|}}
                            <tr>
                              <th>{{task.task_id}}</th>
                              <td>
                                <p>{{task.task_title}}</p>
                              </td>
                              <td>
                                {{formatDate task.task_deadline}}
                              </td>
                              <td>
                                <p>{{sanitiseStatus task.task_status}}</p>
                              </td>
                            </tr>
                            {{/each}}
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class='buttons is-flex is-justify-content-center mt-3'>
                <a href="/teams/{{team_id}}" class='button has-background-info-dark has-text-white'>View Team
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<script src="/js/teamPg.js"></script>